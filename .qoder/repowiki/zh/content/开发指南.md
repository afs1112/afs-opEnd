# å¼€å‘æŒ‡å—

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**  
- [README.md](file://README.md)
- [debug-env.js](file://debug-env.js)
- [debug-protobuf.js](file://debug-protobuf.js)
- [test-multicast.js](file://test-multicast.js)
- [test-protobuf-multicast.js](file://test-protobuf-multicast.js)
- [src/protobuf/PublicStruct.proto](file://src/protobuf/PublicStruct.proto)
- [src/protobuf/UavFlyStatusStruct.proto](file://src/protobuf/UavFlyStatusStruct.proto)
- [src/protobuf/UavNavMonitorStruct.proto](file://src/protobuf/UavNavMonitorStruct.proto)
- [src/protobuf/PlatformCmd.proto](file://src/protobuf/PlatformCmd.proto) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [src/protobuf/PlatformStatus.proto](file://src/protobuf/PlatformStatus.proto) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [src/main/services/multicast.service.ts](file://src/main/services/multicast.service.ts)
- [src/main/services/protobuf-parser.service.ts](file://src/main/services/protobuf-parser.service.ts)
- [src/main/services/multicast-sender.service.ts](file://src/main/services/multicast-sender.service.ts) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [src/main/main.ts](file://src/main/main.ts)
- [src/main/database/db.service.ts](file://src/main/database/db.service.ts)
- [src/main/database/migrations/001-initial-schema.js](file://src/main/database/migrations/001-initial-schema.js)
- [src/main/database/migrations/002-update-table-users.js](file://src/main/database/migrations/002-update-table-users.js)
- [src/main/database/seeds/001-sample-data.js](file://src/main/database/seeds/001-sample-data.js)
- [src/renderer/views/pages/ArtilleryOperationPage.vue](file://src/renderer/views/pages/ArtilleryOperationPage.vue) - *æœ€è¿‘æäº¤ä¸­æ›´æ–°*
- [src/testScipt/test-platform-cmd.js](file://src/testScipt/test-platform-cmd.js) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [src/testScipt/test-platform-status.js](file://src/testScipt/test-platform-status.js) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [platform-speed-to-ground-speed-conversion.md](file://platform-speed-to-ground-speed-conversion.md) - *æœ€è¿‘æäº¤ä¸­æ·»åŠ *
- [docs/SPEED_SETTING_FEATURE.md](file://docs/SPEED_SETTING_FEATURE.md) - *æœ€è¿‘æäº¤ä¸­æ·»åŠ *
- [testScipt/test-platform-speed-waypoint.js](file://testScipt/test-platform-speed-waypoint.js) - *æœ€è¿‘æäº¤ä¸­æ·»åŠ *
- [src/main/services/multicast-sender.service.ts](file://src/main/services/multicast-sender.service.ts) - *æœ€è¿‘æäº¤ä¸­æ›´æ–°*
- [src/protobuf/PlatformCmd.proto](file://src/protobuf/PlatformCmd.proto) - *æœ€è¿‘æäº¤ä¸­æ›´æ–°*
- [src/protobuf/UaviationSimulationStruct.proto](file://src/protobuf/UaviationSimulationStruct.proto) - *æœ€è¿‘æäº¤ä¸­æ›´æ–°*
</cite>

## æ›´æ–°æ‘˜è¦
**å˜æ›´å†…å®¹**   
- æ–°å¢äº†å…³äºé€Ÿåº¦è½¬æ¢åŠŸèƒ½çš„è¯¦ç»†æ–‡æ¡£ï¼ŒåŒ…æ‹¬`platform-speed-to-ground-speed-conversion.md`ä¸­çš„å®ç°ç»†èŠ‚
- æ·»åŠ äº†æ— äººæœºé€Ÿåº¦è®¾ç½®åŠŸèƒ½çš„å®Œæ•´è¯´æ˜ï¼Œæ¶µç›–å‰ç«¯ç•Œé¢ã€æ•°æ®ç»“æ„å’Œåç«¯æ”¯æŒ
- æ›´æ–°äº†`test-platform-speed-waypoint.js`æµ‹è¯•è„šæœ¬çš„æ–‡æ¡£ï¼Œè¯¦ç»†è¯´æ˜äº†èˆªç‚¹è½¬æ¢é€»è¾‘çš„ä¿®æ”¹
- åœ¨"æ–°å¢Protobufåè®®æµç¨‹"ç« èŠ‚ä¸­è¡¥å……äº†`Uav_Set_Speed`å‘½ä»¤çš„å®ç°ç»†èŠ‚
- å¢å¼ºäº†`multicast-sender.service.ts`ä¸­é€Ÿåº¦ç›¸å…³å­—æ®µçš„å¤„ç†é€»è¾‘è¯´æ˜
- æ›´æ–°äº†"æµ‹è¯•è„šæœ¬è¯¦è§£"ç« èŠ‚ï¼Œå¢åŠ äº†é€Ÿåº¦ç›¸å…³æµ‹è¯•è„šæœ¬çš„è¿è¡Œæ–¹æ³•å’Œé¢„æœŸè¾“å‡º

## ç›®å½•
1. [æœ¬åœ°å¼€å‘ä¸è°ƒè¯•ç¯å¢ƒè®¾ç½®](#æœ¬åœ°å¼€å‘ä¸è°ƒè¯•ç¯å¢ƒè®¾ç½®)  
2. [è°ƒè¯•å·¥å…·ä½¿ç”¨æŒ‡å—](#è°ƒè¯•å·¥å…·ä½¿ç”¨æŒ‡å—)  
3. [æµ‹è¯•è„šæœ¬è¯¦è§£](#æµ‹è¯•è„šæœ¬è¯¦è§£)  
4. [æ–­ç‚¹è°ƒè¯•ä¸Chrome DevToolsä½¿ç”¨](#æ–­ç‚¹è°ƒè¯•ä¸chrome-devtoolsä½¿ç”¨)  
5. [æ–°å¢Protobufåè®®æµç¨‹](#æ–°å¢protobufåè®®æµç¨‹)  
6. [æ•°æ®åº“è¿ç§»è„šæœ¬æ ‡å‡†æµç¨‹](#æ•°æ®åº“è¿ç§»è„šæœ¬æ ‡å‡†æµç¨‹)  
7. [ä»£ç é£æ ¼ä¸æäº¤è§„èŒƒ](#ä»£ç é£æ ¼ä¸æäº¤è§„èŒƒ)  

## æœ¬åœ°å¼€å‘ä¸è°ƒè¯•ç¯å¢ƒè®¾ç½®

æœ¬é¡¹ç›®åŸºäºElectron + Vue 3 + Vite + TypeScriptæ„å»ºï¼Œæ”¯æŒè·¨å¹³å°è¿è¡Œã€‚å¼€å‘è€…éœ€ç¡®ä¿æœ¬åœ°ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- **Node.js**: 18+ï¼ˆæ¨èLTSç‰ˆæœ¬ï¼‰
- **åŒ…ç®¡ç†å™¨**: npm 9+ æˆ– pnpm
- **Python**: 3.10+ï¼ˆç”¨äºnode-gypç¼–è¯‘åŸç”Ÿæ¨¡å—ï¼‰
- **æ„å»ºå·¥å…·**:
  - **Windows**: Visual Studio Build Tools
  - **macOS**: Xcode Command Line Tools
  - **Linux**: build-essential

### å¼€å‘ç¯å¢ƒæ­å»ºæ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd afs-opEnd
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   # ä½¿ç”¨npm
   npm install
   
   # æˆ–ä½¿ç”¨pnpmï¼ˆæ¨èï¼‰
   pnpm install
   ```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   # å¯åŠ¨Electronä¸»è¿›ç¨‹å’ŒViteå¼€å‘æœåŠ¡å™¨
   npm run dev
   ```

4. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**
   ```bash
   # æ„å»ºå¯æ‰§è¡Œç¨‹åº
   npm run build
   ```

5. **å¯åŠ¨åº”ç”¨**
   ```bash
   # å¯åŠ¨å·²æ„å»ºçš„åº”ç”¨
   npm start
   ```

**Section sources**
- [README.md](file://README.md#L0-L50)

## è°ƒè¯•å·¥å…·ä½¿ç”¨æŒ‡å—

é¡¹ç›®æä¾›äº†ä¸¤ä¸ªä¸“ç”¨çš„è°ƒè¯•è„šæœ¬ï¼Œç”¨äºåœ¨ä¸å¯åŠ¨å®Œæ•´åº”ç”¨çš„æƒ…å†µä¸‹éªŒè¯æ ¸å¿ƒåŠŸèƒ½ã€‚

### debug-env.jsï¼šç¯å¢ƒå˜é‡è°ƒè¯•

è¯¥è„šæœ¬ç”¨äºéªŒè¯`config.env`æ–‡ä»¶çš„åŠ è½½å’Œè§£ææƒ…å†µã€‚

```javascript
// debug-env.js
const { app } = require('electron');
const dotenv = require('dotenv');
const path = require('path');

console.log('=== ä¸»è¿›ç¨‹ç¯å¢ƒå˜é‡è°ƒè¯• ===');

const envPath = path.join(__dirname, 'config.env');
const fs = require('fs');

if (fs.existsSync(envPath)) {
  console.log('âœ… config.envæ–‡ä»¶å­˜åœ¨:', envPath);
  const envContent = fs.readFileSync(envPath, 'utf8');
  console.log('æ–‡ä»¶å†…å®¹:\n', envContent);
  
  dotenv.config({ path: envPath });
  
  console.log('\nç¯å¢ƒå˜é‡:');
  console.log('MULTICAST_ADDRESS:', process.env.MULTICAST_ADDRESS);
  console.log('MULTICAST_PORT:', process.env.MULTICAST_PORT);
  console.log('INTERFACE_ADDRESS:', process.env.INTERFACE_ADDRESS);
  console.log('NODE_ENV:', process.env.NODE_ENV);
  
  const config = {
    address: process.env.MULTICAST_ADDRESS || '224.0.0.1',
    port: parseInt(process.env.MULTICAST_PORT || '8888'),
    interfaceAddress: process.env.INTERFACE_ADDRESS || '0.0.0.0'
  };
  
  console.log('\ngetConfigè¿”å›å€¼:', config);
} else {
  console.log('âŒ config.envæ–‡ä»¶ä¸å­˜åœ¨:', envPath);
}

console.log('=========================='); 
```

**ç”¨é€”**ï¼š  
- ç¡®è®¤`config.env`æ–‡ä»¶è·¯å¾„æ­£ç¡®ä¸”å¯è¯»
- éªŒè¯ç¯å¢ƒå˜é‡æ˜¯å¦è¢«æ­£ç¡®åŠ è½½
- æ¨¡æ‹Ÿä¸»è¿›ç¨‹ä¸­é…ç½®çš„è·å–é€»è¾‘

**è¿è¡Œæ–¹æ³•**ï¼š
```bash
node debug-env.js
```

é¢„æœŸè¾“å‡ºå°†æ˜¾ç¤º`config.env`æ–‡ä»¶å†…å®¹åŠè§£æåçš„ç¯å¢ƒå˜é‡å€¼ã€‚

### debug-protobuf.jsï¼šProtobufè§£æè°ƒè¯•

è¯¥è„šæœ¬ç”¨äºç‹¬ç«‹æµ‹è¯•Protobufæ¶ˆæ¯çš„åŠ è½½å’Œè§£æåŠŸèƒ½ã€‚

```javascript
// debug-protobuf.js
const protobuf = require('protobufjs');
const path = require('path');

async function debugProtobuf() {
  try {
    console.log('åŠ è½½protobufå®šä¹‰...');
    
    const root = await protobuf.load([
      path.join(__dirname, 'src/protobuf/PublicStruct.proto'),
      path.join(__dirname, 'src/protobuf/PlatFormStatus.proto')
    ]);
    
    console.log('âœ… Protobufå®šä¹‰åŠ è½½æˆåŠŸ');
    console.log('å¯ç”¨çš„ç±»å‹:', Object.keys(root.nested || {}));
    
    const fullPacket = 'aa5501292200000008e90710041a1b0947688f1ec6195d4011a772f334b7f3434019ec75870b56e35840';
    const protobufHex = fullPacket.substring(16);
    const protobufData = Buffer.from(protobufHex, 'hex');
    
    console.log('åŸå§‹æ•°æ®åŒ…:', fullPacket);
    console.log('Protobufæ•°æ®:', protobufHex);
    console.log('Protobufæ•°æ®é•¿åº¦:', protobufData.length);
    
    try {
      const PlatformStatusInfo = root.lookupType('PlatformStatus.PlatformStatusInfo');
      console.log('âœ… æ‰¾åˆ°PlatformStatusInfoç±»å‹');
      
      const decoded = PlatformStatusInfo.decode(protobufData);
      console.log('âœ… è§£ç æˆåŠŸ:', JSON.stringify(decoded, null, 2));
      
    } catch (error) {
      console.error('âŒ è§£ç å¤±è´¥:', error.message);
    }
    
  } catch (error) {
    console.error('âŒ è°ƒè¯•å¤±è´¥:', error);
  }
}

debugProtobuf();
```

**ç”¨é€”**ï¼š  
- éªŒè¯`.proto`æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
- æµ‹è¯•ç‰¹å®šæ•°æ®åŒ…çš„è§£æé€»è¾‘
- è°ƒè¯•`PlatformStatusInfo`ç­‰æ¶ˆæ¯ç±»å‹çš„å®šä¹‰

**è¿è¡Œæ–¹æ³•**ï¼š
```bash
node debug-protobuf.js
```

**Section sources**
- [debug-env.js](file://debug-env.js#L0-L42)
- [debug-protobuf.js](file://debug-protobuf.js#L0-L42)

## æµ‹è¯•è„šæœ¬è¯¦è§£

é¡¹ç›®æä¾›å¤šä¸ªæµ‹è¯•è„šæœ¬ï¼Œç”¨äºæ¨¡æ‹Ÿä¸åŒåœºæ™¯ä¸‹çš„æ•°æ®å‘é€ã€‚

### test-multicast.jsï¼šç»„æ’­åŠŸèƒ½æµ‹è¯•

æ­¤è„šæœ¬åˆ›å»ºä¸€ä¸ªUDPå®¢æˆ·ç«¯ï¼Œå‘æŒ‡å®šç»„æ’­åœ°å€å‘¨æœŸæ€§å‘é€çº¯æ–‡æœ¬æ•°æ®ã€‚

```javascript
// test-multicast.js
const dgram = require('dgram');
const sender = dgram.createSocket('udp4');

const MULTICAST_ADDRESS = '239.255.43.21';
const MULTICAST_PORT = 10086;

function sendTestData() {
  const message = Buffer.from(`æµ‹è¯•æ•°æ® - ${new Date().toISOString()}`);
  
  sender.send(message, MULTICAST_PORT, MULTICAST_ADDRESS, (err) => {
    if (err) {
      console.error('å‘é€å¤±è´¥:', err);
    } else {
      console.log(`å·²å‘é€æ•°æ®åˆ° ${MULTICAST_ADDRESS}:${MULTICAST_PORT}:`, message.toString());
    }
  });
}

console.log('å¼€å§‹å‘é€ç»„æ’­æµ‹è¯•æ•°æ®...');
console.log(`ç›®æ ‡åœ°å€: ${MULTICAST_ADDRESS}:${MULTICAST_PORT}`);
console.log('æŒ‰ Ctrl+C åœæ­¢');

setInterval(sendTestData, 5000);
sendTestData(); // ç«‹å³å‘é€ä¸€æ¬¡
```

**è¦†ç›–çš„æµ‹è¯•ç”¨ä¾‹**ï¼š  
- UDPç»„æ’­å¥—æ¥å­—çš„åˆ›å»ºä¸ç»‘å®š
- æ•°æ®åŒ…çš„å‘¨æœŸæ€§å‘é€
- é”™è¯¯å¤„ç†ä¸ä¼˜é›…é€€å‡º

**è¿è¡Œæ–¹æ³•**ï¼š
```bash
node test-multicast.js
```

**é¢„æœŸè¾“å‡º**ï¼š
```
å¼€å§‹å‘é€ç»„æ’­æµ‹è¯•æ•°æ®...
ç›®æ ‡åœ°å€: 239.255.43.21:10086
æŒ‰ Ctrl+C åœæ­¢
å·²å‘é€æ•°æ®åˆ° 239.255.43.21:10086: æµ‹è¯•æ•°æ® - 2024-05-20T08:30:00.000Z
```

### test-protobuf-multicast.jsï¼šProtobufç»„æ’­æµ‹è¯•

æ­¤è„šæœ¬æ˜¯æ ¸å¿ƒæµ‹è¯•å·¥å…·ï¼Œç”¨äºå‘é€ç¬¦åˆåè®®æ ¼å¼çš„Protobufæ•°æ®åŒ…ã€‚

```javascript
// test-protobuf-multicast.js
const dgram = require('dgram');
const protobuf = require('protobufjs');
const path = require('path');

const sender = dgram.createSocket('udp4');
const MULTICAST_ADDRESS = '239.255.43.21';
const MULTICAST_PORT = 10086;

async function loadProtobufDefinitions() {
  // åŠ è½½å¤šä¸ª.protoæ–‡ä»¶
  root = await protobuf.load([
    path.join(__dirname, 'src', 'protobuf', 'PublicStruct.proto'),
    path.join(__dirname, 'src', 'protobuf', 'UavNavMonitorStruct.proto'),
    path.join(__dirname, 'src', 'protobuf', 'UavFlyMonitorStruct.proto'),
    path.join(__dirname, 'src', 'protobuf', 'UaviationSimulationStruct.proto')
  ]);
}

// åˆ›å»ºä¸åŒç±»å‹çš„æ•°æ®åŒ…
function createHeartbeatData() { /* ... */ }
function createFlyStatusData() { /* ... */ }
function createFlyControlData() { /* ... */ }
function createAttitudeControlData() { /* ... */ }
function createEngineControlData() { /* ... */ }

function sendData(data, description) {
  sender.send(data, MULTICAST_PORT, MULTICAST_ADDRESS, (err) => {
    if (err) {
      console.error('å‘é€å¤±è´¥:', err);
    } else {
      console.log(`å·²å‘é€ ${description} åˆ° ${MULTICAST_ADDRESS}:${MULTICAST_PORT}`);
      console.log(`æ•°æ®å¤§å°: ${data.length} å­—èŠ‚`);
      console.log(`åŒ…ç±»å‹: 0x${data[0].toString(16)}`);
      console.log('---');
    }
  });
}

async function main() {
  await loadProtobufDefinitions();
  
  console.log('å¼€å§‹å‘é€Protobufæ ¼å¼çš„ç»„æ’­æµ‹è¯•æ•°æ®...');
  console.log(`ç›®æ ‡åœ°å€: ${MULTICAST_ADDRESS}:${MULTICAST_PORT}`);
  console.log('æŒ‰ Ctrl+C åœæ­¢');
  console.log('---');

  // ç«‹å³å‘é€ä¸€æ¬¡å„ç§ç±»å‹çš„æ•°æ®
  sendData(createHeartbeatData(), 'å¿ƒè·³æ•°æ®');
  setTimeout(() => sendData(createFlyStatusData(), 'é£è¡ŒçŠ¶æ€æ•°æ®'), 1000);
  setTimeout(() => sendData(createFlyControlData(), 'é£è¡Œæ§åˆ¶æ•°æ®'), 2000);
  setTimeout(() => sendData(createAttitudeControlData(), 'å§¿æ€æ§åˆ¶æ•°æ®'), 3000);
  setTimeout(() => sendData(createEngineControlData(), 'å‘åŠ¨æœºæ§åˆ¶æ•°æ®'), 4000);

  // å‘¨æœŸæ€§å‘é€
  setInterval(() => sendData(createHeartbeatData(), 'å¿ƒè·³æ•°æ®'), 10000);
  setInterval(() => sendData(createFlyStatusData(), 'é£è¡ŒçŠ¶æ€æ•°æ®'), 15000);
}
```

**è¦†ç›–çš„æµ‹è¯•ç”¨ä¾‹èŒƒå›´**ï¼š  
- Protobufå®šä¹‰æ–‡ä»¶çš„æ‰¹é‡åŠ è½½
- å¤šç§æ¶ˆæ¯ç±»å‹ï¼ˆå¿ƒè·³ã€é£è¡ŒçŠ¶æ€ã€æ§åˆ¶æŒ‡ä»¤ç­‰ï¼‰çš„åºåˆ—åŒ–
- ç¬¦åˆ`0xAA 0x55 + ProtocolID + PackageType + Size + ProtobufData`æ ¼å¼çš„æ•°æ®åŒ…æ„é€ 
- å‘¨æœŸæ€§ä¸ä¸€æ¬¡æ€§æ•°æ®å‘é€çš„æ··åˆåœºæ™¯

**è¿è¡Œæ–¹æ³•**ï¼š
```bash
node test-protobuf-multicast.js
```

**é¢„æœŸè¾“å‡º**ï¼š
```
å¼€å§‹å‘é€Protobufæ ¼å¼çš„ç»„æ’­æµ‹è¯•æ•°æ®...
ç›®æ ‡åœ°å€: 239.255.43.21:10086
æŒ‰ Ctrl+C åœæ­¢
---
å·²å‘é€ å¿ƒè·³æ•°æ® åˆ° 239.255.43.21:10086
æ•°æ®å¤§å°: 5 å­—èŠ‚
åŒ…ç±»å‹: 0x2
---
å·²å‘é€ é£è¡ŒçŠ¶æ€æ•°æ® åˆ° 239.255.43.21:10086
æ•°æ®å¤§å°: 150 å­—èŠ‚
åŒ…ç±»å‹: 0x1
---
```

### test-platform-cmd.jsï¼šPlatformCmdåè®®æµ‹è¯•

æ­¤è„šæœ¬ç”¨äºå‘é€ç¬¦åˆPlatformCmdåè®®æ ¼å¼çš„ç»„æ’­æ•°æ®åŒ…ï¼Œä¸»è¦ç”¨äºæµ‹è¯•ç«ç‚®æ§åˆ¶å‘½ä»¤çš„å‘é€åŠŸèƒ½ã€‚

```javascript
// src/testScipt/test-platform-cmd.js
const dgram = require('dgram');
const protobuf = require('protobufjs');
const path = require('path');

// åˆ›å»ºUDP socketç”¨äºå‘é€ç»„æ’­æ•°æ®
const sender = dgram.createSocket('udp4');

// ç»„æ’­åœ°å€å’Œç«¯å£
const MULTICAST_ADDRESS = '239.255.43.21';
const MULTICAST_PORT = 10086;

// åŠ è½½protobufå®šä¹‰
let root = null;
let messageTypes = {};

async function loadProtobufDefinitions() {
  try {
    const protobufPath = path.join(__dirname, '..', 'protobuf');
    
    // åŠ è½½PlatformCmdç›¸å…³çš„protobufå®šä¹‰
    root = await protobuf.load([
      path.join(protobufPath, 'PublicStruct.proto'),
      path.join(protobufPath, 'PlatformCmd.proto')
    ]);

    // è·å–æ¶ˆæ¯ç±»å‹
    messageTypes = {
      PlatformCmd: root.lookupType('PlatformStatus.PlatformCmd'),
      FireParam: root.lookupType('PlatformStatus.FireParam')
    };

    console.log('PlatformCmd Protobufå®šä¹‰æ–‡ä»¶åŠ è½½æˆåŠŸ');
    console.log('å¯ç”¨æ¶ˆæ¯ç±»å‹:', Object.keys(messageTypes));
  } catch (error) {
    console.error('åŠ è½½PlatformCmd Protobufå®šä¹‰æ–‡ä»¶å¤±è´¥:', error);
    process.exit(1);
  }
}

// åˆ›å»ºPlatformCmdæµ‹è¯•æ•°æ®
function createPlatformCmdData() {
  // åˆ›å»ºç«ç‚®å‘å°„å‚æ•°
  const fireParam = messageTypes.FireParam.create({
    weaponName: '155æ¯«ç±³æ¦´å¼¹ç‚®',
    targetName: 'æ•Œæ–¹è£…ç”²è½¦',
    quantity: 1
  });

  // åˆ›å»ºå¹³å°æ§åˆ¶å‘½ä»¤
  const platformCmd = messageTypes.PlatformCmd.create({
    commandID: Date.now(),
    platformName: 'artillery1',
    platformType: 'Artillery',
    command: 10, // Arty_Fire = 10
    fireParam: fireParam
  });

  return platformCmd;
}

// åˆ›å»ºå¸¦åè®®å¤´çš„æ•°æ®åŒ…
function createPlatformCmdPacket() {
  try {
    const platformCmdData = createPlatformCmdData();
    
    // ç¼–ç protobufæ•°æ®
    const protobufBuffer = messageTypes.PlatformCmd.encode(platformCmdData).finish();
    
    console.log('åˆ›å»ºçš„PlatformCmdæ•°æ®:', JSON.stringify(messageTypes.PlatformCmd.toObject(platformCmdData), null, 2));
    console.log('Protobufç¼–ç åå¤§å°:', protobufBuffer.length, 'å­—èŠ‚');

    // æ„é€ å®Œæ•´çš„æ•°æ®åŒ…: 0xAA 0x55 + protocolID + packageType + size + protobufData
    const protocolID = 0x01; // åè®®ID
    const packageType = 0x2A; // PackType_PlatformCmd
    const size = protobufBuffer.length;

    // åˆ›å»ºåŒ…å¤´
    const header = Buffer.alloc(8);
    header[0] = 0xAA; // åŒ…å¤´æ ‡è¯†
    header[1] = 0x55; // åŒ…å¤´æ ‡è¯†
    header[2] = protocolID; // åè®®ID
    header[3] = packageType; // åŒ…ç±»å‹
    header.writeUInt32LE(size, 4); // protobufæ•°æ®é•¿åº¦ï¼ˆå°ç«¯åºï¼‰

    // ç»„åˆå®Œæ•´æ•°æ®åŒ…
    const fullPacket = Buffer.concat([header, protobufBuffer]);
    
    console.log('æ•°æ®åŒ…æ„é€ è¯¦æƒ…:', {
      æ€»é•¿åº¦: fullPacket.length,
      åŒ…å¤´: header.toString('hex'),
      åè®®ID: `0x${protocolID.toString(16)}`,
      åŒ…ç±»å‹: `0x${packageType.toString(16)}`,
      å£°æ˜å¤§å°: size,
      å®é™…protobufå¤§å°: protobufBuffer.length,
      å®Œæ•´åŒ…å‰16å­—èŠ‚: fullPacket.subarray(0, Math.min(16, fullPacket.length)).toString('hex')
    });

    return fullPacket;
  } catch (error) {
    console.error('åˆ›å»ºPlatformCmdæ•°æ®åŒ…å¤±è´¥:', error);
    throw error;
  }
}

// å‘é€æ•°æ®
function sendPlatformCmdData() {
  try {
    const packet = createPlatformCmdPacket();
    
    sender.send(packet, MULTICAST_PORT, MULTICAST_ADDRESS, (err) => {
      if (err) {
        console.error('å‘é€å¤±è´¥:', err);
      } else {
        console.log(`âœ… å·²å‘é€PlatformCmdæ•°æ®åˆ° ${MULTICAST_ADDRESS}:${MULTICAST_PORT}`);
        console.log(`ğŸ“¦ æ•°æ®åŒ…å¤§å°: ${packet.length} å­—èŠ‚`);
        console.log(`ğŸ“‹ åŒ…ç±»å‹: 0x${packet[3].toString(16)} (PackType_PlatformCmd)`);
        console.log(`ğŸ”— åè®®ID: 0x${packet[2].toString(16)}`);
        console.log(`â° å‘é€æ—¶é—´: ${new Date().toLocaleString('zh-CN')}`);
        console.log('---');
      }
    });
  } catch (error) {
    console.error('å‘é€PlatformCmdæ•°æ®å¤±è´¥:', error);
  }
}

// ä¸»å‡½æ•°
async function main() {
  await loadProtobufDefinitions();
  
  console.log('ğŸš€ å¼€å§‹å‘é€PlatformCmdæ ¼å¼çš„ç»„æ’­æµ‹è¯•æ•°æ®...');
  console.log(`ğŸ¯ ç›®æ ‡åœ°å€: ${MULTICAST_ADDRESS}:${MULTICAST_PORT}`);
  console.log('â¹ï¸  æŒ‰ Ctrl+C åœæ­¢');
  console.log('=====================================');

  // ç«‹å³å‘é€ä¸€æ¬¡
  console.log('ğŸ“¤ å‘é€PlatformCmdæµ‹è¯•æ•°æ®...');
  sendPlatformCmdData();

  // æ¯10ç§’å‘é€ä¸€æ¬¡
  setInterval(() => {
    console.log('ğŸ“¤ å®šæ—¶å‘é€PlatformCmdæ•°æ®...');
    sendPlatformCmdData();
  }, 10000);
}

// ä¼˜é›…é€€å‡º
process.on('SIGINT', () => {
  console.log('\nğŸ›‘ åœæ­¢å‘é€...');
  sender.close();
  process.exit(0);
});

// å¯åŠ¨
main().catch(console.error);
```

**è¦†ç›–çš„æµ‹è¯•ç”¨ä¾‹èŒƒå›´**ï¼š  
- PlatformCmd.protoå’ŒPublicStruct.protoå®šä¹‰æ–‡ä»¶çš„åŠ è½½
- PlatformCmdæ¶ˆæ¯ç±»å‹å’ŒFireParamå­ç»“æ„çš„åºåˆ—åŒ–
- ç¬¦åˆ`0xAA 0x55 + ProtocolID + PackageType + Size + ProtobufData`æ ¼å¼çš„æ•°æ®åŒ…æ„é€ 
- ç«ç‚®å‘å°„å‘½ä»¤ï¼ˆArty_Fire = 10ï¼‰çš„æµ‹è¯•
- å‘¨æœŸæ€§å‘é€PlatformCmdæ•°æ®åŒ…

**è¿è¡Œæ–¹æ³•**ï¼š
```bash
node src/testScipt/test-platform-cmd.js
```

**é¢„æœŸè¾“å‡º**ï¼š
```
ğŸš€ å¼€å§‹å‘é€PlatformCmdæ ¼å¼çš„ç»„æ’­æµ‹è¯•æ•°æ®...
ğŸ¯ ç›®æ ‡åœ°å€: 239.255.43.21:10086
â¹ï¸  æŒ‰ Ctrl+C åœæ­¢
=====================================
ğŸ“¤ å‘é€PlatformCmdæµ‹è¯•æ•°æ®...
åˆ›å»ºçš„PlatformCmdæ•°æ®: {
  "commandID": 1756871426494,
  "platformName": "artillery1",
  "platformType": "Artillery",
  "command": 10,
  "fireParam": {
    "weaponName": "155æ¯«ç±³æ¦´å¼¹ç‚®",
    "targetName": "æ•Œæ–¹è£…ç”²è½¦",
    "quantity": 1
  }
}
Protobufç¼–ç åå¤§å°: 80 å­—èŠ‚
æ•°æ®åŒ…æ„é€ è¯¦æƒ…: {
  "æ€»é•¿åº¦": 88,
  "åŒ…å¤´": "aa55012a",
  "åè®®ID": "0x1",
  "åŒ…ç±»å‹": "0x2a",
  "å£°æ˜å¤§å°": 80,
  "å®é™…protobufå¤§å°": 80,
  "å®Œæ•´åŒ…å‰16å­—èŠ‚": "aa55012a500000000a00000000000000"
}
âœ… å·²å‘é€PlatformCmdæ•°æ®åˆ° 239.255.43.21:10086
ğŸ“¦ æ•°æ®åŒ…å¤§å°: 88 å­—èŠ‚
ğŸ“‹ åŒ…ç±»å‹: 0x2a (PackType_PlatformCmd)
ğŸ”— åè®®ID: 0x1
â° å‘é€æ—¶é—´: 2025/9/3 14:30:26
---
```

### test-platform-status.jsï¼šPlatformStatusåè®®æµ‹è¯•

æ­¤è„šæœ¬ç”¨äºå‘é€ç¬¦åˆPlatformStatusåè®®æ ¼å¼çš„ç»„æ’­æ•°æ®åŒ…ï¼Œä¸»è¦ç”¨äºæµ‹è¯•å¹³å°çŠ¶æ€ä¿¡æ¯çš„å‘é€åŠŸèƒ½ã€‚

```javascript
// src/testScipt/test-platform-status.js
const dgram = require('dgram');
const protobuf = require('protobufjs');
const path = require('path');

// åˆ›å»ºUDP socketç”¨äºå‘é€ç»„æ’­æ•°æ®
const sender = dgram.createSocket('udp4');

// ç»„æ’­åœ°å€å’Œç«¯å£
const MULTICAST_ADDRESS = '239.255.43.21';
const MULTICAST_PORT = 10086;

// åŠ è½½protobufå®šä¹‰
let root = null;
let messageTypes = {};

async function loadProtobufDefinitions() {
  try {
    const protobufPath = path.join(__dirname, '..', 'protobuf');
    
    // åŠ è½½Platform Statusç›¸å…³çš„protobufå®šä¹‰
    root = await protobuf.load([
      path.join(protobufPath, 'PlatformStatus.proto')
    ]);

    // è·å–æ¶ˆæ¯ç±»å‹
    messageTypes = {
      Platforms: root.lookupType('PlatformStatus.Platforms'),
      Platform: root.lookupType('PlatformStatus.Platform'),
      PlatformBase: root.lookupType('PlatformStatus.PlatformBase'),
      Location: root.lookupType('PlatformStatus.Location'),
      WayPoint: root.lookupType('PlatformStatus.WayPoint'),
      Mover: root.lookupType('PlatformStatus.Mover'),
      PartParam: root.lookupType('PlatformStatus.PartParam'),
      Comm: root.lookupType('PlatformStatus.Comm'),
      Sensor: root.lookupType('PlatformStatus.Sensor'),
      Weapon: root.lookupType('PlatformStatus.Weapon'),
      Track: root.lookupType('PlatformStatus.Track')
    };

    console.log('PlatformStatus Protobufå®šä¹‰æ–‡ä»¶åŠ è½½æˆåŠŸ');
    console.log('å¯ç”¨æ¶ˆæ¯ç±»å‹:', Object.keys(messageTypes));
  } catch (error) {
    console.error('åŠ è½½PlatformStatus Protobufå®šä¹‰æ–‡ä»¶å¤±è´¥:', error);
    process.exit(1);
  }
}

// åˆ›å»ºä½ç½®ä¿¡æ¯
function createLocation(longitude, latitude, altitude) {
  return {
    longitude: longitude,
    latitude: latitude,
    altitude: altitude
  };
}

// åˆ›å»ºèˆªè¿¹ç‚¹
function createWayPoint(longitude, latitude, altitude, labelName, speed) {
  return {
    longitude: longitude,
    latitude: latitude,
    altitude: altitude,
    labelName: labelName || "",
    speed: speed || 0
  };
}

// åˆ›å»ºæ¨è¿›å™¨ä¿¡æ¯
function createMover(type, wayPoints) {
  return {
    type: type,
    route: wayPoints || []
  };
}

// åˆ›å»ºéƒ¨ä»¶å‚æ•°
function createPartParam(name, type, slewMode, minAzSlew, maxAzSlew, minElSlew, maxElSlew, currentAz, currentEl, isTurnedOn) {
  return {
    name: name,
    type: type,
    slewMode: slewMode || 0, // cSLEW_FIXED
    minAzSlew: minAzSlew || 0,
    maxAzSlew: maxAzSlew || 360,
    minElSlew: minElSlew || -90,
    maxElSlew: maxElSlew || 90,
    currentAz: currentAz || 0,
    currentEl: currentEl || 0,
    isTurnedOn: isTurnedOn || false
  };
}

// åˆ›å»ºé€šä¿¡è®¾å¤‡
function createComm(name, type, network) {
  return {
    base: createPartParam(name, type, 0, 0, 360, -90, 90, 0, 0, true),
    network: network || "Radio"
  };
}

// åˆ›å»ºä¼ æ„Ÿå™¨
function createSensor(name, type, mode) {
  return {
    base: createPartParam(name, type, 3, 0, 360, -90, 90, 45, 30, true), // cSLEW_AZ_EL
    mode: mode || "Search"
  };
}

// åˆ›å»ºæ­¦å™¨
function createWeapon(name, type, quantity) {
  return {
    base: createPartParam(name, type, 1, 0, 180, -10, 80, 0, 0, false), // cSLEW_AZ
    quantity: quantity || 0
  };
}

// åˆ›å»ºè·Ÿè¸ªç›®æ ‡
function createTrack(sensorName, targetName, targetType) {
  return {
    sensorName: sensorName,
    targetName: targetName,
    targetType: targetType
  };
}

// åˆ›å»ºå¹³å°åŸºç¡€ä¿¡æ¯
function createPlatformBase(name, type, side, group, broken, location) {
  return {
    name: name,
    type: type,
    side: side,
    group: group,
    broken: broken || false,
    location: location
  };
}

// åˆ›å»ºå•ä¸ªå¹³å°æ•°æ®
function createPlatform(platformId, name, type) {
  const location = createLocation(116.3974 + Math.random() * 0.01, 39.9093 + Math.random() * 0.01, 1000 + Math.random() * 500);
  
  const base = createPlatformBase(
    name,
    type,
    "å‹å†›",
    "ç¬¬ä¸€ç¼–é˜Ÿ",
    false,
    location
  );

  // åˆ›å»ºèˆªè¿¹ç‚¹
  const wayPoints = [
    createWayPoint(116.3974, 39.9093, 1000, "èµ·å§‹ç‚¹", 50),
    createWayPoint(116.4074, 39.9193, 1200, "èˆªè¿¹ç‚¹1", 80),
    createWayPoint(116.4174, 39.9293, 1500, "ç›®æ ‡ç‚¹", 60)
  ];

  const mover = createMover("Jet Engine", wayPoints);

  // é€šä¿¡è®¾å¤‡
  const comms = [
    createComm("ä¸»é€šä¿¡", "UHF Radio", "UHF"),
    createComm("æ•°æ®é“¾", "Data Link", "LINK16")
  ];

  // ä¼ æ„Ÿå™¨
  const sensors = [
    createSensor("ä¸»é›·è¾¾", "Search Radar", "Search"),
    createSensor("å…‰ç”µç³»ç»Ÿ", "EO/IR", "Track")
  ];

  // æ­¦å™¨
  const weapons = [
    createWeapon("ç©ºç©ºå¯¼å¼¹", "AAM", 4),
    createWeapon("æœºç‚®", "Gun", 200)
  ];

  // è·Ÿè¸ªç›®æ ‡
  const tracks = [
    createTrack("ä¸»é›·è¾¾", "æ•Œæœº001", "Fighter"),
    createTrack("å…‰ç”µç³»ç»Ÿ", "æ•Œæœº002", "Bomber")
  ];

  return {
    base: base,
    updataTime: Date.now() / 1000, // å½“å‰æ—¶é—´æˆ³ï¼ˆç§’ï¼‰
    mover: mover,
    comms: comms,
    sensors: sensors,
    weapons: weapons,
    tracks: tracks
  };
}

// åˆ›å»ºå¤šå¹³å°çŠ¶æ€æ•°æ®
function createPlatformsData() {
  const platforms = [
    createPlatform(1, "æˆ˜æ–—æœº-001", "Fighter"),
    createPlatform(2, "è½°ç‚¸æœº-001", "Bomber"),
    createPlatform(3, "é¢„è­¦æœº-001", "AWACS"),
    createPlatform(4, "è¿è¾“æœº-001", "Transport")
  ];

  const platformsData = {
    platform: platforms
  };

  return platformsData;
}

// åˆ›å»ºå¸¦åè®®å¤´çš„æ•°æ®åŒ…
function createPlatformStatusPacket() {
  try {
    const platformsData = createPlatformsData();
    
    // ç¼–ç protobufæ•°æ®
    const message = messageTypes.Platforms.create(platformsData);
    const protobufBuffer = messageTypes.Platforms.encode(message).finish();
    
    console.log('åˆ›å»ºçš„å¹³å°æ•°æ®:', JSON.stringify(platformsData, null, 2));
    console.log('Protobufç¼–ç åå¤§å°:', protobufBuffer.length, 'å­—èŠ‚');

    // æ„é€ å®Œæ•´çš„æ•°æ®åŒ…: 0xAA 0x55 + protocolID + packageType + size + protobufData
    const protocolID = 0x01; // åè®®ID
    const packageType = 0x29; // PackType_PlatformStatus
    const size = protobufBuffer.length;

    // åˆ›å»ºåŒ…å¤´
    const header = Buffer.alloc(8);
    header[0] = 0xAA; // åŒ…å¤´æ ‡è¯†
    header[1] = 0x55; // åŒ…å¤´æ ‡è¯†
    header[2] = protocolID; // åè®®ID
    header[3] = packageType; // åŒ…ç±»å‹
    header.writeUInt32LE(size, 4); // protobufæ•°æ®é•¿åº¦ï¼ˆå°ç«¯åºï¼‰

    // ç»„åˆå®Œæ•´æ•°æ®åŒ…
    const fullPacket = Buffer.concat([header, protobufBuffer]);
    
    console.log('æ•°æ®åŒ…æ„é€ è¯¦æƒ…:', {
      æ€»é•¿åº¦: fullPacket.length,
      åŒ…å¤´: header.toString('hex'),
      åè®®ID: `0x${protocolID.toString(16)}`,
      åŒ…ç±»å‹: `0x${packageType.toString(16)}`,
      å£°æ˜å¤§å°: size,
      å®é™…protobufå¤§å°: protobufBuffer.length,
      å®Œæ•´åŒ…å‰16å­—èŠ‚: fullPacket.subarray(0, Math.min(16, fullPacket.length)).toString('hex')
    });

    return fullPacket;
  } catch (error) {
    console.error('åˆ›å»ºå¹³å°çŠ¶æ€æ•°æ®åŒ…å¤±è´¥:', error);
    throw error;
  }
}

// å‘é€æ•°æ®
function sendPlatformStatusData() {
  try {
    const packet = createPlatformStatusPacket();
    
    sender.send(packet, MULTICAST_PORT, MULTICAST_ADDRESS, (err) => {
      if (err) {
        console.error('å‘é€å¤±è´¥:', err);
      } else {
        console.log(`âœ… å·²å‘é€å¹³å°çŠ¶æ€æ•°æ®åˆ° ${MULTICAST_ADDRESS}:${MULTICAST_PORT}`);
        console.log(`ğŸ“¦ æ•°æ®åŒ…å¤§å°: ${packet.length} å­—èŠ‚`);
        console.log(`ğŸ“‹ åŒ…ç±»å‹: 0x${packet[3].toString(16)} (PackType_PlatformStatus)`);
        console.log(`ğŸ”— åè®®ID: 0x${packet[2].toString(16)}`);
        console.log(`â° å‘é€æ—¶é—´: ${new Date().toLocaleString('zh-CN')}`);
        console.log('---');
      }
    });
  } catch (error) {
    console.error('å‘é€å¹³å°çŠ¶æ€æ•°æ®å¤±è´¥:', error);
  }
}

// åˆ›å»ºç®€åŒ–çš„å•å¹³å°æµ‹è¯•æ•°æ®
function createSimplePlatformData() {
  const simplePlatform = {
    base: {
      name: "æµ‹è¯•å¹³å°-001",
      type: "Fighter",
      side: "å‹å†›",
      group: "æµ‹è¯•ç»„",
      broken: false,
      location: {
        longitude: 116.3974,
        latitude: 39.9093,
        altitude: 1000
      }
    },
    updataTime: Date.now() / 1000
  };

  const platformsData = {
    platform: [simplePlatform]
  };

  return platformsData;
}

// å‘é€ç®€åŒ–æµ‹è¯•æ•°æ®
function sendSimplePlatformData() {
  try {
    const platformsData = createSimplePlatformData();
    
    // ç¼–ç protobufæ•°æ®
    const message = messageTypes.Platforms.create(platformsData);
    const protobufBuffer = messageTypes.Platforms.encode(message).finish();
    
    console.log('åˆ›å»ºçš„ç®€åŒ–å¹³å°æ•°æ®:', JSON.stringify(platformsData, null, 2));

    // æ„é€ å®Œæ•´çš„æ•°æ®åŒ…
    const protocolID = 0x01;
    const packageType = 0x29;
    const size = protobufBuffer.length;

    const header = Buffer.alloc(8);
    header[0] = 0xAA;
    header[1] = 0x55;
    header[2] = protocolID;
    header[3] = packageType;
    header.writeUInt32LE(size, 4);

    const fullPacket = Buffer.concat([header, protobufBuffer]);
    
    sender.send(fullPacket, MULTICAST_PORT, MULTICAST_ADDRESS, (err) => {
      if (err) {
        console.error('å‘é€ç®€åŒ–å¹³å°æ•°æ®å¤±è´¥:', err);
      } else {
        console.log(`âœ… å·²å‘é€ç®€åŒ–å¹³å°çŠ¶æ€æ•°æ®åˆ° ${MULTICAST_ADDRESS}:${MULTICAST_PORT}`);
        console.log(`ğŸ“¦ æ•°æ®åŒ…å¤§å°: ${fullPacket.length} å­—èŠ‚`);
        console.log(`ğŸ“‹ åŒ…ç±»å‹: 0x${fullPacket[3].toString(16)} (PackType_PlatformStatus)`);
        console.log('---');
      }
    });
  } catch (error) {
    console.error('å‘é€ç®€åŒ–å¹³å°æ•°æ®å¤±è´¥:', error);
  }
}

// ä¸»å‡½æ•°
async function main() {
  await loadProtobufDefinitions();
  
  console.log('ğŸš€ å¼€å§‹å‘é€PlatformStatusæ ¼å¼çš„ç»„æ’­æµ‹è¯•æ•°æ®...');
  console.log(`ğŸ¯ ç›®æ ‡åœ°å€: ${MULTICAST_ADDRESS}:${MULTICAST_PORT}`);
  console.log('â¹ï¸  æŒ‰ Ctrl+C åœæ­¢');
  console.log('=====================================');

  // ç«‹å³å‘é€ä¸€æ¬¡å®Œæ•´å¹³å°çŠ¶æ€æ•°æ®
  console.log('ğŸ“¤ å‘é€å®Œæ•´å¹³å°çŠ¶æ€æ•°æ®...');
  sendPlatformStatusData();

  // æ¯30ç§’å‘é€ä¸€æ¬¡å®Œæ•´æ•°æ®
  setInterval(() => {
    console.log('ğŸ“¤ å®šæ—¶å‘é€å®Œæ•´å¹³å°çŠ¶æ€æ•°æ®...');
    sendPlatformStatusData();
  }, 30000);

  // æ¯10ç§’å‘é€ä¸€æ¬¡ç®€åŒ–å¹³å°çŠ¶æ€æ•°æ®
  setInterval(() => {
    console.log('ğŸ“¤ å‘é€ç®€åŒ–å¹³å°çŠ¶æ€æ•°æ®...');
    sendSimplePlatformData();
  }, 10000);
}

// ä¼˜é›…é€€å‡º
process.on('SIGINT', () => {
  console.log('\nğŸ›‘ åœæ­¢å‘é€...');
  sender.close();
  process.exit(0);
});

// å¯åŠ¨
main().catch(console.error);
```

**è¦†ç›–çš„æµ‹è¯•ç”¨ä¾‹èŒƒå›´**ï¼š  
- PlatformStatus.protoå®šä¹‰æ–‡ä»¶çš„åŠ è½½
- Platformsã€Platformã€PlatformBaseç­‰æ¶ˆæ¯ç±»å‹çš„åºåˆ—åŒ–
- å¤šå¹³å°çŠ¶æ€ä¿¡æ¯çš„æ¨¡æ‹Ÿï¼ˆæˆ˜æ–—æœºã€è½°ç‚¸æœºã€é¢„è­¦æœºã€è¿è¾“æœºï¼‰
- è¯¦ç»†è®¾å¤‡ä¿¡æ¯çš„æµ‹è¯•ï¼ˆé€šä¿¡è®¾å¤‡ã€ä¼ æ„Ÿå™¨ã€æ­¦å™¨ã€è·Ÿè¸ªç›®æ ‡ã€èˆªè¿¹ç‚¹ï¼‰
- ç¬¦åˆ`0xAA 0x55 + ProtocolID + PackageType + Size + ProtobufData`æ ¼å¼çš„æ•°æ®åŒ…æ„é€ 
- å‘¨æœŸæ€§å‘é€å®Œæ•´å’Œç®€åŒ–å¹³å°çŠ¶æ€æ•°æ®

**è¿è¡Œæ–¹æ³•**ï¼š
```bash
node src/testScipt/test-platform-status.js
```

**é¢„æœŸè¾“å‡º**ï¼š
```
ğŸš€ å¼€å§‹å‘é€PlatformStatusæ ¼å¼çš„ç»„æ’­æµ‹è¯•æ•°æ®...
ğŸ¯ ç›®æ ‡åœ°å€: 239.255.43.21:10086
â¹ï¸  æŒ‰ Ctrl+C åœæ­¢
=====================================
ğŸ“¤ å‘é€å®Œæ•´å¹³å°çŠ¶æ€æ•°æ®...
åˆ›å»ºçš„å¹³å°æ•°æ®: {
  "platform": [
    {
      "base": {
        "name": "æˆ˜æ–—æœº-001",
        "type": "Fighter",
        "side": "å‹å†›",
        "group": "ç¬¬ä¸€ç¼–é˜Ÿ",
        "broken": false,
        "location": {
          "longitude": 116.3984,
          "latitude": 39.9103,
          "altitude": 1234.5
        }
      },
      "updataTime": 1756871426.494,
      "mover": {
        "type": "Jet Engine",
        "route": [
          {
            "longitude": 116.3974,
            "latitude": 39.9093,
            "altitude": 1000,
            "labelName": "èµ·å§‹ç‚¹",
            "speed": 50
          },
          // ... å…¶ä»–èˆªè¿¹ç‚¹
        ]
      },
      "comms": [
        {
          "base": {
            "name": "ä¸»é€šä¿¡",
            "type": "UHF Radio",
            "slewMode": 0,
            "minAzSlew": 0,
            "maxAzSlew": 360,
            "minElSlew": -90,
            "maxElSlew": 90,
            "currentAz": 0,
            "currentEl": 0,
            "isTurnedOn": true
          },
          "network": "UHF"
        },
        // ... å…¶ä»–é€šä¿¡è®¾å¤‡
      ],
      "sensors": [
        {
          "base": {
            "name": "ä¸»é›·è¾¾",
            "type": "Search Radar",
            "slewMode": 3,
            "minAzSlew": 0,
            "maxAzSlew": 360,
            "minElSlew": -90,
            "maxElSlew": 90,
            "currentAz": 45,
            "currentEl": 30,
            "isTurnedOn": true
          },
          "mode": "Search"
        },
        // ... å…¶ä»–ä¼ æ„Ÿå™¨
      ],
      "weapons": [
        {
          "base": {
            "name": "ç©ºç©ºå¯¼å¼¹",
            "type": "AAM",
            "slewMode": 1,
            "minAzSlew": 0,
            "maxAzSlew": 180,
            "minElSlew": -10,
            "maxElSlew": 80,
            "currentAz": 0,
            "currentEl": 0,
            "isTurnedOn": false
          },
          "quantity": 4
        },
        // ... å…¶ä»–æ­¦å™¨
      ],
      "tracks": [
        {
          "sensorName": "ä¸»é›·è¾¾",
          "targetName": "æ•Œæœº001",
          "targetType": "Fighter"
        },
        // ... å…¶ä»–è·Ÿè¸ªç›®æ ‡
      ]
    },
    // ... å…¶ä»–3ä¸ªå¹³å°
  ]
}
Protobufç¼–ç åå¤§å°: 3403 å­—èŠ‚
æ•°æ®åŒ…æ„é€ è¯¦æƒ…: {
  "æ€»é•¿åº¦": 3411,
  "åŒ…å¤´": "aa550129",
  "åè®®ID": "0x1",
  "åŒ…ç±»å‹": "0x29",
  "å£°æ˜å¤§å°": 3403,
  "å®é™…protobufå¤§å°": 3403,
  "å®Œæ•´åŒ…å‰16å­—èŠ‚": "aa550129fb0d00000a00000000000000"
}
âœ… å·²å‘é€å¹³å°çŠ¶æ€æ•°æ®åˆ° 239.255.43.21:10086
ğŸ“¦ æ•°æ®åŒ…å¤§å°: 3411 å­—èŠ‚
ğŸ“‹ åŒ…ç±»å‹: 0x29 (PackType_PlatformStatus)
ğŸ”— åè®®ID: 0x1
â° å‘é€æ—¶é—´: 2025/9/3 14:30:26
---
```

### test-platform-speed-waypoint.jsï¼šèˆªç‚¹é€Ÿåº¦è½¬æ¢æµ‹è¯•

æ­¤è„šæœ¬ç”¨äºéªŒè¯èˆªç‚¹è½¬æ¢æ—¶ä½¿ç”¨å¹³å°é€Ÿåº¦çš„åŠŸèƒ½ï¼Œç¡®ä¿èˆªç‚¹é€Ÿåº¦ä¸å¹³å°å®é™…é€Ÿåº¦ä¿æŒä¸€è‡´ã€‚

```javascript
// testScipt/test-platform-speed-waypoint.js
console.log('ğŸ›©ï¸ èˆªç‚¹è½¬æ¢ä½¿ç”¨å¹³å°é€Ÿåº¦åŠŸèƒ½éªŒè¯');
console.log('=================================');

console.log('\nğŸ¯ ä¿®æ”¹ç›®æ ‡:');
console.log('- èˆªç‚¹è½¬æ¢æ—¶ä¸å†ä½¿ç”¨å›ºå®šçš„é»˜è®¤é€Ÿåº¦10');
console.log('- è·å–å½“å‰é€‰æ‹©å¹³å°çš„é€Ÿåº¦æ•°æ®');
console.log('- å°†å¹³å°é€Ÿåº¦è®¾ç½®ä¸ºå„èˆªç‚¹çš„é€Ÿåº¦');

console.log('\nğŸ”§ ä¿®æ”¹å†…å®¹:');

console.log('\n1. IPCé€šä¿¡ä¿®æ”¹:');
console.log('   ä¿®æ”¹å‰:');
console.log('   ```javascript');
console.log('   // è¯·æ±‚å¹³å°åç§°');
console.log('   window.webContents.send("route:requestSelectedPlatform");');
console.log('   // å“åº”å¹³å°åç§°');
console.log('   resolve(platformName);');
console.log('   ```');
console.log('   ');
console.log('   ä¿®æ”¹å:');
console.log('   ```javascript');
console.log('   // è¯·æ±‚å¹³å°æ•°æ®');
console.log('   window.webContents.send("route:requestSelectedPlatformData");');
console.log('   // å“åº”å¹³å°æ•°æ®');
console.log('   resolve({name: platformName, speed: platformSpeed});');
console.log('   ```');

console.log('\n2. èˆªç‚¹è½¬æ¢é€»è¾‘ä¿®æ”¹:');
console.log('   ä¿®æ”¹å‰:');
console.log('   ```javascript');
console.log('   return {');
console.log('     longitude: coord.longitude || 0,');
console.log('     latitude: coord.latitude || 0,');
console.log('     altitude: coord.altitude || 0,');
console.log('     labelName: `èˆªç‚¹${index + 1}`,');
console.log('     speed: 10 // å›ºå®šé»˜è®¤é€Ÿåº¦');
console.log('   };');
console.log('   ```');
console.log('   ');
console.log('   ä¿®æ”¹å:');
console.log('   ```javascript');
console.log('   const platformSpeed = selectedPlatformData.speed || 10;');
console.log('   return {');
console.log('     longitude: coord.longitude || 0,');
console.log('     latitude: coord.latitude || 0,');
console.log('     altitude: coord.altitude || 0,');
console.log('     labelName: `èˆªç‚¹${index + 1}`,');
console.log('     speed: platformSpeed // ä½¿ç”¨å¹³å°é€Ÿåº¦');
console.log('   };');
console.log('   ```');

console.log('\n3. å‰ç«¯å“åº”é€»è¾‘:');
console.log('   ```javascript');
console.log('   // è·å–å½“å‰é€‰æ‹©å¹³å°çš„å®Œæ•´æ•°æ®');
console.log('   const currentPlatform = platforms.value.find(p => p.name === selectedPlatform.value);');
console.log('   const platformData = {');
console.log('     name: selectedPlatform.value || "",');
console.log('     speed: currentPlatform?.base?.speed || undefined');
console.log('   };');
console.log('   ```');

console.log('\nğŸ“Š æ•°æ®æµç¨‹:');

console.log('\n   ğŸ”„ å®Œæ•´æµç¨‹:');
console.log('   1. å¯¼èˆªè½¯ä»¶å‘é€èˆªçº¿æ•°æ® (UavRouteUpload)');
console.log('   2. ç³»ç»Ÿæ¥æ”¶å¹¶éªŒè¯UavIdåŒ¹é…');
console.log('   3. è¯·æ±‚å½“å‰é€‰æ‹©çš„å¹³å°æ•°æ® (åŒ…å«é€Ÿåº¦)');
console.log('   4. CommandTestPageå“åº”å¹³å°æ•°æ®');
console.log('   5. ä½¿ç”¨å¹³å°é€Ÿåº¦è½¬æ¢èˆªç‚¹');
console.log('   6. å‘é€PlatformCmdç»™å¹³å°');

console.log('\n   ğŸ“¡ å¹³å°æ•°æ®ç»“æ„:');
console.log('   ```javascript');
console.log('   {');
console.log('     name: "UAV-001",           // å¹³å°åç§°');
console.log('     speed: 25                  // å¹³å°å½“å‰é€Ÿåº¦ (m/s)');
console.log('   }');
console.log('   ```');

console.log('\n   ğŸ—ºï¸ è½¬æ¢åçš„èˆªç‚¹:');
console.log('   ```javascript');
console.log('   [');
console.log('     {');
console.log('       longitude: 116.3974,');
console.log('       latitude: 39.9093,');
console.log('       altitude: 100,');
console.log('       labelName: "èˆªç‚¹1",');
console.log('       speed: 25              // ä½¿ç”¨å¹³å°é€Ÿåº¦è€Œä¸æ˜¯10');
console.log('     },');
console.log('     // ... æ›´å¤šèˆªç‚¹');
console.log('   ]');
console.log('   ```');

console.log('\nğŸ§ª æµ‹è¯•åœºæ™¯:');

console.log('\n   ğŸ“Š åœºæ™¯1: å¹³å°æœ‰é€Ÿåº¦æ•°æ®');
console.log('   å‰ææ¡ä»¶:');
console.log('   - å·²é€‰æ‹©å¹³å° (å¦‚: UAV-001)');
console.log('   - å¹³å°çŠ¶æ€æ•°æ®ä¸­åŒ…å«é€Ÿåº¦ä¿¡æ¯ (å¦‚: 25 m/s)');
console.log('   æµ‹è¯•æ­¥éª¤:');
console.log('   1. å‘é€èˆªçº¿æ•°æ®åŒ…');
console.log('   2. è§‚å¯Ÿè½¬æ¢åçš„èˆªç‚¹é€Ÿåº¦');
console.log('   é¢„æœŸç»“æœ: æ‰€æœ‰èˆªç‚¹é€Ÿåº¦ä¸º25 m/s');

console.log('\n   ğŸ”„ åœºæ™¯2: å¹³å°æ— é€Ÿåº¦æ•°æ®');
console.log('   å‰ææ¡ä»¶:');
console.log('   - å·²é€‰æ‹©å¹³å°ä½†é€Ÿåº¦æ•°æ®ä¸ºç©ºæˆ–undefined');
console.log('   æµ‹è¯•æ­¥éª¤:');
console.log('   1. å‘é€èˆªçº¿æ•°æ®åŒ…');
console.log('   2. è§‚å¯Ÿè½¬æ¢åçš„èˆªç‚¹é€Ÿåº¦');
console.log('   é¢„æœŸç»“æœ: æ‰€æœ‰èˆªç‚¹é€Ÿåº¦ä¸ºé»˜è®¤å€¼10 m/s');

console.log('\n   âŒ åœºæ™¯3: æœªé€‰æ‹©å¹³å°');
console.log('   å‰ææ¡ä»¶:');
console.log('   - æœªé€‰æ‹©ä»»ä½•å¹³å°');
console.log('   æµ‹è¯•æ­¥éª¤:');
console.log('   1. å‘é€èˆªçº¿æ•°æ®åŒ…');
console.log('   2. è§‚å¯Ÿç³»ç»Ÿå“åº”');
console.log('   é¢„æœŸç»“æœ: è·³è¿‡è½¬æ¢ï¼Œæç¤ºéœ€è¦é€‰æ‹©å¹³å°');

console.log('\n   ğŸ” åœºæ™¯4: å¤šä¸ªèˆªç‚¹éªŒè¯');
console.log('   å‰ææ¡ä»¶:');
console.log('   - é€‰æ‹©é€Ÿåº¦ä¸º30 m/sçš„å¹³å°');
console.log('   - å‘é€åŒ…å«5ä¸ªèˆªç‚¹çš„èˆªçº¿');
console.log('   æµ‹è¯•æ­¥éª¤:');
console.log('   1. å‘é€å¤šèˆªç‚¹èˆªçº¿æ•°æ®');
console.log('   2. æ£€æŸ¥æ¯ä¸ªèˆªç‚¹çš„é€Ÿåº¦è®¾ç½®');
console.log('   é¢„æœŸç»“æœ: æ‰€æœ‰5ä¸ªèˆªç‚¹é€Ÿåº¦éƒ½ä¸º30 m/s');

console.log('\nğŸ“‹ éªŒè¯æ–¹æ³•:');

console.log('\n   ğŸ’» æ§åˆ¶å°æ—¥å¿—æ£€æŸ¥:');
console.log('   æŸ¥æ‰¾ä»¥ä¸‹æ—¥å¿—:');
console.log('   - "[RouteConverter] ä½¿ç”¨é€‰æ‹©çš„å¹³å°: UAV-001 é€Ÿåº¦: 25"');
console.log('   - "[RouteConverter] ä½¿ç”¨å¹³å°é€Ÿåº¦: 25 m/s"');
console.log('   - "[CommandTestPage] å“åº”å¹³å°æ•°æ®: {name: ..., speed: ...}"');

console.log('\n   ğŸ“¦ æ•°æ®åŒ…å†…å®¹éªŒè¯:');
console.log('   1. ä½¿ç”¨ç»„æ’­ç›‘å¬å·¥å…·');
console.log('   2. æ•è·è½¬æ¢åçš„PlatformCmdæ•°æ®åŒ…');
console.log('   3. æ£€æŸ¥navParam.routeä¸­æ¯ä¸ªèˆªç‚¹çš„speedå­—æ®µ');
console.log('   4. ç¡®è®¤é€Ÿåº¦å€¼ä¸å¹³å°é€Ÿåº¦ä¸€è‡´');

console.log('\n   ğŸ›ï¸ ç•Œé¢æ“ä½œéªŒè¯:');
console.log('   1. åœ¨CommandTestPageé€‰æ‹©ä¸åŒå¹³å°');
console.log('   2. è§‚å¯Ÿå¹³å°çŠ¶æ€æ•°æ®ä¸­çš„é€Ÿåº¦ä¿¡æ¯');
console.log('   3. å‘é€èˆªçº¿æ•°æ®æµ‹è¯•è½¬æ¢');
console.log('   4. éªŒè¯è½¬æ¢ç»“æœä½¿ç”¨æ­£ç¡®çš„é€Ÿåº¦');

console.log('\nâœ… æˆåŠŸæ ‡å‡†:');
console.log('- èˆªç‚¹è½¬æ¢æ—¶æ­£ç¡®è·å–å¹³å°é€Ÿåº¦æ•°æ®');
console.log('- æ‰€æœ‰èˆªç‚¹ä½¿ç”¨å¹³å°é€Ÿåº¦è€Œä¸æ˜¯å›ºå®šå€¼10');
console.log('- å¹³å°æ— é€Ÿåº¦æ•°æ®æ—¶ä½¿ç”¨é»˜è®¤å€¼10');
console.log('- æœªé€‰æ‹©å¹³å°æ—¶æ­£ç¡®å¤„ç†é”™è¯¯æƒ…å†µ');
console.log('- IPCé€šä¿¡æ­£å¸¸ï¼Œæ•°æ®ä¼ é€’å‡†ç¡®');
console.log('- æ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºä½¿ç”¨çš„é€Ÿåº¦å€¼');

console.log('\nğŸ¯ åŠŸèƒ½ä¼˜åŠ¿:');
console.log('- èˆªç‚¹é€Ÿåº¦ä¸å¹³å°å®é™…é€Ÿåº¦ä¿æŒä¸€è‡´');
console.log('- æé«˜èˆªçº¿è§„åˆ’çš„å‡†ç¡®æ€§');
console.log('- å‡å°‘æ‰‹åŠ¨è®¾ç½®é€Ÿåº¦çš„å·¥ä½œé‡');
console.log('- æ”¯æŒåŠ¨æ€é€Ÿåº¦è°ƒæ•´');

console.log('\nğŸš€ å¼€å§‹æµ‹è¯•å¹³å°é€Ÿåº¦èˆªç‚¹è½¬æ¢åŠŸèƒ½ï¼');
```

**è¦†ç›–çš„æµ‹è¯•ç”¨ä¾‹èŒƒå›´**ï¼š  
- IPCé€šä¿¡ä¿®æ”¹ï¼Œä»è¯·æ±‚å¹³å°åç§°æ”¹ä¸ºè¯·æ±‚å¹³å°æ•°æ®ï¼ˆåŒ…å«é€Ÿåº¦ï¼‰
- èˆªç‚¹è½¬æ¢é€»è¾‘ä¿®æ”¹ï¼Œä½¿ç”¨å¹³å°é€Ÿåº¦è€Œéå›ºå®šé»˜è®¤å€¼10
- å‰ç«¯å“åº”é€»è¾‘æ›´æ–°ï¼Œè¿”å›å¹³å°åç§°å’Œé€Ÿåº¦ä¿¡æ¯
- å¤šç§æµ‹è¯•åœºæ™¯éªŒè¯ï¼ˆæœ‰é€Ÿåº¦æ•°æ®ã€æ— é€Ÿåº¦æ•°æ®ã€æœªé€‰æ‹©å¹³å°ã€å¤šèˆªç‚¹ï¼‰
- æ§åˆ¶å°æ—¥å¿—ã€æ•°æ®åŒ…å†…å®¹å’Œç•Œé¢æ“ä½œçš„éªŒè¯æ–¹æ³•

**è¿è¡Œæ–¹æ³•**ï¼š
```bash
node testScipt/test-platform-speed-waypoint.js
```

**é¢„æœŸè¾“å‡º**ï¼š
```
ğŸ›©ï¸ èˆªç‚¹è½¬æ¢ä½¿ç”¨å¹³å°é€Ÿåº¦åŠŸèƒ½éªŒè¯
=================================

ğŸ¯ ä¿®æ”¹ç›®æ ‡:
- èˆªç‚¹è½¬æ¢æ—¶ä¸å†ä½¿ç”¨å›ºå®šçš„é»˜è®¤é€Ÿåº¦10
- è·å–å½“å‰é€‰æ‹©å¹³å°çš„é€Ÿåº¦æ•°æ®
- å°†å¹³å°é€Ÿåº¦è®¾ç½®ä¸ºå„èˆªç‚¹çš„é€Ÿåº¦

ğŸ”§ ä¿®æ”¹å†…å®¹:

1. IPCé€šä¿¡ä¿®æ”¹:
   ä¿®æ”¹å‰:
   ```javascript
   // è¯·æ±‚å¹³å°åç§°
   window.webContents.send("route:requestSelectedPlatform");
   // å“åº”å¹³å°åç§°
   resolve(platformName);
   ```

   ä¿®æ”¹å:
   ```javascript
   // è¯·æ±‚å¹³å°æ•°æ®
   window.webContents.send("route:requestSelectedPlatformData");
   // å“åº”å¹³å°æ•°æ®
   resolve({name: platformName, speed: platformSpeed});
   ```

2. èˆªç‚¹è½¬æ¢é€»è¾‘ä¿®æ”¹:
   ä¿®æ”¹å‰:
   ```javascript
   return {
     longitude: coord.longitude || 0,
     latitude: coord.latitude || 0,
     altitude: coord.altitude || 0,
     labelName: `èˆªç‚¹${index + 1}`,
     speed: 10 // å›ºå®šé»˜è®¤é€Ÿåº¦
   };
   ```

   ä¿®æ”¹å:
   ```javascript
   const platformSpeed = selectedPlatformData.speed || 10;
   return {
     longitude: coord.longitude || 0,
     latitude: coord.latitude || 0,
     altitude: coord.altitude || 0,
     labelName: `èˆªç‚¹${index + 1}`,
     speed: platformSpeed // ä½¿ç”¨å¹³å°é€Ÿåº¦
   };
   ```

âœ… æˆåŠŸæ ‡å‡†:
- èˆªç‚¹è½¬æ¢æ—¶æ­£ç¡®è·å–å¹³å°é€Ÿåº¦æ•°æ®
- æ‰€æœ‰èˆªç‚¹ä½¿ç”¨å¹³å°é€Ÿåº¦è€Œä¸æ˜¯å›ºå®šå€¼10
- å¹³å°æ— é€Ÿåº¦æ•°æ®æ—¶ä½¿ç”¨é»˜è®¤å€¼10
- æœªé€‰æ‹©å¹³å°æ—¶æ­£ç¡®å¤„ç†é”™è¯¯æƒ…å†µ
- IPCé€šä¿¡æ­£å¸¸ï¼Œæ•°æ®ä¼ é€’å‡†ç¡®
- æ§åˆ¶å°æ—¥å¿—æ¸…æ™°æ˜¾ç¤ºä½¿ç”¨çš„é€Ÿåº¦å€¼

ğŸš€ å¼€å§‹æµ‹è¯•å¹³å°é€Ÿåº¦èˆªç‚¹è½¬æ¢åŠŸèƒ½ï¼
```

**Section sources**
- [test-multicast.js](file://test-multicast.js#L0-L36)
- [test-protobuf-multicast.js](file://test-protobuf-multicast.js#L0-L230)
- [src/testScipt/test-platform-cmd.js](file://src/testScipt/test-platform-cmd.js#L0-L155) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [src/testScipt/test-platform-status.js](file://src/testScipt/test-platform-status.js#L0-L381) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [testScipt/test-platform-speed-waypoint.js](file://testScipt/test-platform-speed-waypoint.js#L0-L163) - *æœ€è¿‘æäº¤ä¸­æ·»åŠ *

## æ–­ç‚¹è°ƒè¯•ä¸Chrome DevToolsä½¿ç”¨

### ä¸»è¿›ç¨‹è°ƒè¯•

ä¸»è¿›ç¨‹ï¼ˆNode.jsç¯å¢ƒï¼‰çš„è°ƒè¯•ä¸»è¦é€šè¿‡`console.log`å’Œ`debugger`è¯­å¥è¿›è¡Œã€‚

1. **åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹**ï¼š
   ```typescript
   // src/main/main.ts
   ipcMain.handle("multicast:start", async () => {
     debugger; // æ­¤å¤„å°†æš‚åœæ‰§è¡Œ
     try {
       await multicastService.start();
       return { success: true };
     } catch (error: any) {
       return { success: false, error: error.message };
     }
   });
   ```

2. **å¯åŠ¨è°ƒè¯•**ï¼š
   - åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œ `npm run dev`
   - æ‰“å¼€Chromeæµè§ˆå™¨ï¼Œè®¿é—® `chrome://inspect`
   - åœ¨"Remote Target"åˆ—è¡¨ä¸­æ‰¾åˆ°Electronçš„Node.jsè¿›ç¨‹ï¼Œç‚¹å‡»"inspect"é“¾æ¥
   - æ­¤æ—¶å°†æ‰“å¼€Chrome DevToolsï¼Œå¯ä»¥æŸ¥çœ‹è°ƒç”¨æ ˆã€ä½œç”¨åŸŸå˜é‡ç­‰

### æ¸²æŸ“è¿›ç¨‹è°ƒè¯•

æ¸²æŸ“è¿›ç¨‹ï¼ˆVue 3å‰ç«¯ï¼‰çš„è°ƒè¯•æ›´ä¸ºç›´è§‚ã€‚

1. **æ‰“å¼€å¼€å‘è€…å·¥å…·**ï¼š
   - **å¿«æ·é”®**ï¼š`Cmd+Option+I` (macOS) æˆ– `Ctrl+Shift+I` (Windows/Linux)
   - **èœå•**ï¼šç‚¹å‡»"å¼€å‘" -> "æ‰“å¼€å¼€å‘è€…å·¥å…·"

2. **åœ¨Vueç»„ä»¶ä¸­è®¾ç½®æ–­ç‚¹**ï¼š
   ```vue
   <!-- src/renderer/views/pages/MulticastPage.vue -->
   <script setup lang="ts">
   import { onMounted } from 'vue';
   
   onMounted(() => {
     debugger; // é¡µé¢åŠ è½½æ—¶æš‚åœ
     window.electron.ipcRenderer.invoke('multicast:getStatus').then(status => {
       console.log('ç»„æ’­çŠ¶æ€:', status);
     });
   });
   </script>
   ```

3. **ä½¿ç”¨DevToolsåŠŸèƒ½**ï¼š
   - **Elements**: æ£€æŸ¥å’Œä¿®æ”¹DOMç»“æ„
   - **Console**: æŸ¥çœ‹æ—¥å¿—å’Œæ‰§è¡ŒJavaScript
   - **Sources**: è®¾ç½®æ–­ç‚¹ã€å•æ­¥æ‰§è¡Œ
   - **Network**: ç›‘æ§IPCé€šä¿¡
   - **Memory**: åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µ

**Section sources**
- [src/main/main.ts](file://src/main/main.ts#L0-L449)
- [src/renderer/views/pages/MulticastPage.vue](file://src/renderer/views/pages/MulticastPage.vue)

## æ–°å¢Protobufåè®®æµç¨‹

å½“éœ€è¦æ”¯æŒæ–°çš„é€šä¿¡åè®®æ—¶ï¼Œåº”éµå¾ªä»¥ä¸‹æ ‡å‡†æµç¨‹ï¼š

1. **åˆ›å»ºæ–°çš„`.proto`æ–‡ä»¶**  
   åœ¨`src/protobuf/`ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚`NewProtocol.proto`ã€‚

2. **å®šä¹‰æ¶ˆæ¯ç»“æ„**  
   éµå¾ªé¡¹ç›®çº¦å®šçš„å‘½åå’Œæ ¼å¼ï¼š
   ```proto
   // src/protobuf/NewProtocol.proto
   import "PublicStruct.proto";
   package NewModule;
   
   message NewMessage {
     required int32 uavID = 1;
     optional PublicStruct.GeoCoordinate coord = 2;
     // ... å…¶ä»–å­—æ®µ
   }
   ```

3. **åœ¨`PublicStruct.proto`ä¸­æ·»åŠ åŒ…ç±»å‹æšä¸¾**  
   ```proto
   enum PackageType {
     // ... å…¶ä»–ç±»å‹
     PackType_NewMessage = 0x30; // åˆ†é…æ–°çš„åŒ…ç±»å‹å€¼
   }
   ```

4. **åœ¨`protobuf-parser.service.ts`ä¸­æ·»åŠ è§£æé€»è¾‘**  
   ```typescript
   // src/main/services/protobuf-parser.service.ts
   private parseNewMessage(data: Buffer): any {
     try {
       const NewMessage = this.root!.lookupType('NewModule.NewMessage');
       return NewMessage.decode(data);
     } catch (error) {
       console.error('è§£ææ–°æ¶ˆæ¯å¤±è´¥:', error);
       return { error: 'è§£æå¤±è´¥', raw: data.toString('hex') };
     }
   }
   
   // åœ¨parsePacketçš„switchè¯­å¥ä¸­æ·»åŠ 
   case 0x30: // PackType_NewMessage
     parsedData = this.parseNewMessage(messageData);
     break;
   ```

5. **æ›´æ–°`test-protobuf-multicast.js`ä»¥åŒ…å«æ–°æ¶ˆæ¯çš„æµ‹è¯•**  
   ```javascript
   function createNewMessageData() {
     // æ„é€ æµ‹è¯•æ•°æ®
   }
   
   // åœ¨mainå‡½æ•°ä¸­æ·»åŠ å‘é€é€»è¾‘
   setInterval(() => sendData(createNewMessageData(), 'æ–°æ¶ˆæ¯æ•°æ®'), 20000);
   ```

6. **ç¼–å†™å•å…ƒæµ‹è¯•**ï¼ˆå¯é€‰ï¼‰  
   åˆ›å»º`test-new-protocol.js`è¿›è¡Œç‹¬ç«‹éªŒè¯ã€‚

### PlatformCmdåè®®å®ç°ç»†èŠ‚

PlatformCmdåè®®ç”¨äºå‘é€å¹³å°æ§åˆ¶å‘½ä»¤ï¼Œå¦‚ç«ç‚®å‘å°„ã€æ— äººæœºèˆªçº¿è§„åˆ’ç­‰ã€‚

**æ¶ˆæ¯ç»“æ„**ï¼š
```javascript
{
  commandID: æ—¶é—´æˆ³,           // å‘½ä»¤ID
  platformName: "artillery1",  // å¹³å°åç§°
  platformType: "Artillery",   // å¹³å°ç±»å‹  
  command: 10,                 // Arty_Fire (ç«ç‚®å‘å°„)
  fireParam: {
    weaponName: "ç”¨æˆ·è¾“å…¥çš„æ­¦å™¨åç§°",
    targetName: "ç”¨æˆ·è¾“å…¥çš„ç›®æ ‡åç§°", 
    quantity: 1                // å‘å°„æ¬¡æ•°
  }
}
```

**æ•°æ®åŒ…æ ¼å¼**ï¼š
```
[åŒ…å¤´] [åè®®ID] [åŒ…ç±»å‹] [æ•°æ®é•¿åº¦] [Protobufæ•°æ®]
 0xAA   0x01     0x2A     4å­—èŠ‚LE    å˜é•¿
 0x55
```

- **åŒ…ç±»å‹**: 0x2A (PackType_PlatformCmd)
- **åè®®ID**: 0x01
- **ç»„æ’­åœ°å€**: 239.255.43.21:10086

**æ”¯æŒçš„PlatformCommandæšä¸¾å€¼**ï¼š
- `Arty_Load = 9` - ç«ç‚®è£…å¡«
- `Arty_Fire = 10` - ç«ç‚®å‘å°„

**å®ç°æ–‡ä»¶**ï¼š
- `src/protobuf/PlatformCmd.proto` - åè®®å®šä¹‰
- `src/main/services/protobuf-parser.service.ts` - è§£æé€»è¾‘
- `src/main/services/multicast-sender.service.ts` - å‘é€æœåŠ¡
- `src/testScipt/test-platform-cmd.js` - æµ‹è¯•è„šæœ¬

### PlatformStatusåè®®å®ç°ç»†èŠ‚

PlatformStatusåè®®ç”¨äºä¸ŠæŠ¥å¹³å°çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¹³å°åŸºç¡€ä¿¡æ¯ã€è®¾å¤‡ä¿¡æ¯ã€è¿åŠ¨å‚æ•°ç­‰ã€‚

**æ”¯æŒçš„æ•°æ®ç»“æ„**ï¼š
- **å¹³å°åŸºç¡€ä¿¡æ¯ (PlatformBase)**: åç§°ã€ç±»å‹ã€é˜µè¥ã€ç¼–é˜Ÿã€ä½ç½®ä¿¡æ¯
- **è®¾å¤‡ä¿¡æ¯**: æ¨è¿›å™¨ã€é€šä¿¡è®¾å¤‡ã€ä¼ æ„Ÿå™¨ã€æ­¦å™¨ã€è·Ÿè¸ªç›®æ ‡
- **è¿åŠ¨å‚æ•° (PartParam)**: è½¬åŠ¨æ¨¡å¼ã€è½¬åŠ¨èŒƒå›´é™åˆ¶ã€å½“å‰å§¿æ€è§’åº¦

**æ•°æ®åŒ…æ ¼å¼**ï¼š
```
[åŒ…å¤´] [åè®®ID] [åŒ…ç±»å‹] [æ•°æ®é•¿åº¦] [Protobufæ•°æ®]
 0xAA   0x01     0x29     4å­—èŠ‚LE    å˜é•¿
 0x55
```

- **åŒ…ç±»å‹**: 0x29 (PackType_PlatformStatus)
- **åè®®ID**: 0x01
- **ç»„æ’­åœ°å€**: 239.255.43.21:10086

**å®ç°æ–‡ä»¶**ï¼š
- `src/protobuf/PlatformStatus.proto` - åè®®å®šä¹‰
- `src/main/services/protobuf-parser.service.ts` - è§£æé€»è¾‘
- `src/testScipt/test-platform-status.js` - æµ‹è¯•è„šæœ¬

### Uav_Set_Speedå‘½ä»¤å®ç°ç»†èŠ‚

æ ¹æ®protobufå®šä¹‰ä¸­æ–°å¢çš„`Uav_Set_Speed`å‘½ä»¤ï¼Œåœ¨å‘½ä»¤æ§åˆ¶æµ‹è¯•é¡µé¢æ·»åŠ äº†æ— äººæœºé€Ÿåº¦è®¾ç½®åŠŸèƒ½ã€‚

**Protobufå®šä¹‰**ï¼š
```protobuf
enum PlatformCommand {
  // ... å…¶ä»–å‘½ä»¤
  Uav_Set_Speed = 9; // è®¾å®šæ— äººæœºé€Ÿåº¦
}

message SetSpeedparam {
  optional int32 speed = 1;
}

message PlatformCmd {
  // ... å…¶ä»–å­—æ®µ
  optional SetSpeedparam setSpeedParam = 8; // é€Ÿåº¦è®¾å®šå‚æ•°
}
```

**å‰ç«¯ç•Œé¢**ï¼š
- åœ¨"å¯¼èˆªæ§åˆ¶"åŒºåŸŸæ–°å¢"è®¾ç½®é€Ÿåº¦"æŒ‰é’®
- å¯¹è¯æ¡†åŒ…å«å¹³å°åç§°ï¼ˆåªè¯»ï¼‰å’Œç›®æ ‡é€Ÿåº¦ï¼ˆ1-100 m/sï¼‰è¾“å…¥
- è¾“å…¥èŒƒå›´é™åˆ¶åœ¨1-100 m/sï¼Œæ”¯æŒæ­¥è¿›è°ƒèŠ‚

**æ•°æ®ç»“æ„**ï¼š
```typescript
const setSpeedForm = reactive({
  speed: 10  // é»˜è®¤é€Ÿåº¦ 10 m/s
});

const commandData = {
  commandID: Date.now(),
  platformName: String(selectedPlatform.value),
  command: 9, // Uav_Set_Speed
  setSpeedParam: {
    speed: Number(setSpeedForm.speed)
  }
};
```

**åç«¯æ”¯æŒ**ï¼š
- åœ¨`PlatformCmdData`æ¥å£ä¸­æ–°å¢`setSpeedParam`å­—æ®µ
- åœ¨`multicast-sender.service.ts`ä¸­æ·»åŠ å¯¹`SetSpeedparam`æ¶ˆæ¯ç±»å‹çš„æŸ¥æ‰¾å’Œåˆ›å»ºé€»è¾‘
- æ”¯æŒå®¹é”™å¤„ç†ï¼Œå¦‚æœç±»å‹æœªæ‰¾åˆ°ä¼šè®°å½•è­¦å‘Š

**å®ç°æ–‡ä»¶**ï¼š
- `src/protobuf/PlatformCmd.proto` - å‘½ä»¤æšä¸¾å’Œå‚æ•°ç»“æ„å®šä¹‰
- `src/main/services/multicast-sender.service.ts` - å‘é€æœåŠ¡ä¸­æ·»åŠ é€Ÿåº¦è®¾ç½®å‚æ•°å¤„ç†
- `src/renderer/views/pages/CommandTestPage.vue` - å‰ç«¯ç•Œé¢å®ç°
- `docs/SPEED_SETTING_FEATURE.md` - åŠŸèƒ½è¯¦ç»†æ–‡æ¡£

**Section sources**
- [src/protobuf/PublicStruct.proto](file://src/protobuf/PublicStruct.proto#L0-L57)
- [src/main/services/protobuf-parser.service.ts](file://src/main/services/protobuf-parser.service.ts#L0-L458)
- [src/protobuf/PlatformCmd.proto](file://src/protobuf/PlatformCmd.proto#L0-L39) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [src/protobuf/PlatformStatus.proto](file://src/protobuf/PlatformStatus.proto#L0-L103) - *æœ€è¿‘æäº¤ä¸­æ–°å¢*
- [src/main/services/multicast-sender.service.ts](file://src/main/services/multicast-sender.service.ts#L0-L1065)
- [src/protobuf/UaviationSimulationStruct.proto](file://src/protobuf/UaviationSimulationStruct.proto#L0-L211)
- [docs/SPEED_SETTING_FEATURE.md](file://docs/SPEED_SETTING_FEATURE.md#L0-L140)

## æ•°æ®åº“è¿ç§»è„šæœ¬æ ‡å‡†æµç¨‹

é¡¹ç›®ä½¿ç”¨SQLite3æ•°æ®åº“ï¼Œé€šè¿‡è¿ç§»è„šæœ¬ç®¡ç†æ¨¡å¼å˜æ›´ã€‚

### è¿ç§»è„šæœ¬ç»“æ„

æ¯ä¸ªè¿ç§»è„šæœ¬ä½äº`src/main/database/migrations/`ç›®å½•ï¼Œå‘½åæ ¼å¼ä¸º`001-initial-schema.js`ã€‚

```javascript
// src/main/database/migrations/001-initial-schema.js
import type { Database } from 'sqlite3';

export const up = (db: Database) => {
  db.exec(`
    CREATE TABLE IF NOT EXISTS users (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      name TEXT NOT NULL CHECK(length(name) > 2),
      email TEXT UNIQUE NOT NULL,
      age INTEGER,
      company_id INTEGER,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
    );
    
    CREATE TABLE IF NOT EXISTS companies (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      name TEXT NOT NULL,
      type TEXT,
      capacity INTEGER,
      owner TEXT,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
    );
  `);
};

export const down = (db: Database) => {
  db.exec(`
    DROP TABLE IF EXISTS users;
    DROP TABLE IF EXISTS companies;
  `);
};
```

### æ ‡å‡†æµç¨‹

1. **åˆ›å»ºæ–°è¿ç§»è„šæœ¬**  
   ```bash
   # æ‰‹åŠ¨åˆ›å»ºï¼Œç¡®ä¿åºå·é€’å¢
   touch src/main/database/migrations/003-add-new-table.js
   ```

2. **ç¼–å†™`up`å’Œ`down`å‡½æ•°**  
   - `up`: åº”ç”¨å˜æ›´ï¼ˆåˆ›å»ºè¡¨ã€æ·»åŠ åˆ—ç­‰ï¼‰
   - `down`: æ’¤é”€å˜æ›´ï¼ˆåˆ é™¤è¡¨ã€åˆ é™¤åˆ—ç­‰ï¼‰

3. **åœ¨`db.service.ts`ä¸­æ³¨å†Œè¿ç§»**  
   ```typescript
   // src/main/database/db.service.ts
   export class DBService {
     private migrations = [
       require('./migrations/001-initial-schema'),
       require('./migrations/002-update-table-users'),
       require('./migrations/003-add-new-table'), // æ–°å¢
     ];
   }
   ```

4. **è¿è¡Œè¿ç§»**  
   åœ¨`main.ts`ä¸­ï¼Œ`dbService.applyMigrations()`ä¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚

5. **æ·»åŠ ç§å­æ•°æ®**ï¼ˆå¯é€‰ï¼‰  
   åœ¨`src/main/database/seeds/`ä¸­åˆ›å»ºç§å­è„šæœ¬ï¼Œç”¨äºåˆå§‹åŒ–æµ‹è¯•æ•°æ®ã€‚

**Section sources**
- [src/main/database/migrations/001-initial-schema.js](file://src/main/database/migrations/001-initial-schema.js)
- [src/main/database/migrations/002-update-table-users.js](file://src/main/database/migrations/002-update-table-users.js)
- [src/main/database/seeds/001-sample-data.js](file://src/main/database/seeds/001-sample-data.js)
- [src/main/database/db.service.ts](file://src/main/database/db.service.ts)

## ä»£ç é£æ ¼ä¸æäº¤è§„èŒƒ

### ä»£ç é£æ ¼

- **è¯­è¨€**: TypeScript
- **æ ¼å¼åŒ–**: ä½¿ç”¨Prettierï¼Œé…ç½®è§`.prettierrc`
- **å‘½å**:
  - å˜é‡å’Œå‡½æ•°ï¼š`camelCase`
  - ç±»å’Œæ¥å£ï¼š`PascalCase`
  - å¸¸é‡ï¼š`UPPER_CASE`
- **æ³¨é‡Š**: å…³é”®é€»è¾‘å¿…é¡»æ·»åŠ JSDocæ³¨é‡Š

### æäº¤ä¿¡æ¯æ ¼å¼

é‡‡ç”¨[Conventional Commits](https://www.conventionalcommits.org/)è§„èŒƒï¼š

```
<type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
```

**ç±»å‹ï¼ˆtypeï¼‰**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºæˆ–è¾…åŠ©å·¥å…·å˜åŠ¨

**ç¤ºä¾‹**:
```
feat(multicast): add support for new protocol type 0x30

- Add NewProtocol.proto definition
- Implement parseNewMessage in protobuf-parser.service
- Update test-protobuf-multicast.js to send test data

Closes #123
```

### Pull Requestå®¡æŸ¥è¦æ±‚

1. **åŠŸèƒ½å®Œæ•´æ€§**: PRå¿…é¡»å®Œæ•´å®ç°ä¸€ä¸ªåŠŸèƒ½æˆ–ä¿®å¤ä¸€ä¸ªbug
2. **ä»£ç è´¨é‡**: æ— æ˜æ˜¾æ€§èƒ½é—®é¢˜ï¼Œéµå¾ªä»£ç é£æ ¼
3. **æµ‹è¯•è¦†ç›–**: æ–°åŠŸèƒ½å¿…é¡»åŒ…å«ç›¸åº”çš„æµ‹è¯•
4. **æ–‡æ¡£æ›´æ–°**: APIå˜æ›´éœ€åŒæ­¥æ›´æ–°æ–‡æ¡£
5. **å®¡æŸ¥æµç¨‹**: è‡³å°‘ä¸€åæ ¸å¿ƒæˆå‘˜æ‰¹å‡†åæ–¹å¯åˆå¹¶

**Section sources**
- [package.json](file://package.json)
- [.prettierrc](file://.prettierrc)